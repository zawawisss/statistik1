(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8536:function(e,a,t){Promise.resolve().then(t.bind(t,5828))},5828:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return y}});var s=t(7437),l=t(2265),n=t(7224),c=t(8218),i=t(9646),r=t(498);function o(e){let{title:a,value:t,icon:l,color:o}=e;return(0,s.jsx)(n.w,{className:"w-full",children:(0,s.jsxs)(c.G,{className:"flex flex-col items-center text-center p-6",children:[(0,s.jsx)("div",{className:"p-4 rounded-lg bg-".concat(o,"-100 mb-4"),children:(0,s.jsx)(i.JO,{icon:l,className:"w-8 h-8 text-".concat(o,"-500")})}),(0,s.jsx)("p",{className:"text-sm text-default-500 mb-2",children:a}),(0,s.jsx)("h4",{className:"text-3xl font-bold",children:(0,s.jsx)(r.ZP,{end:t,duration:2})})]})})}var d=t(8379),x=t(879),m=t(4),h=t(8438),u=t(8610),j=t(1878),g=t(9975),f=t(1591),N=t(3316),p=t(8822);let k=e=>{if(!e)return"Tidak Ada Data";let a=new Date;return new Date(e+"T00:00:00Z")>=a?"Aktif":"Tidak Aktif"};function b(){let[e,a]=(0,l.useState)([]),[t,n]=(0,l.useState)([]),[c,i]=(0,l.useState)(!0),[r,o]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0),[u,j]=(0,l.useState)(!1),g=(0,x.T)({async load(e){let{signal:a,cursor:t}=e;t&&h(!1);let s=await fetch(t||"https://swapi.py4e.com/api/people/?search=",{signal:a}),l=await s.json();return j(null!==l.next),{items:l.results,cursor:l.next}}}),[f,N]=(0,d.M)({hasMore:u,onLoadMore:g.loadMore});return((0,l.useEffect)(()=>{(async function(){try{let e=await fetch("/api/statistik");if(!e.ok)throw Error("Gagal mengambil data");let t=await e.json();a(t.ipnuData),n(t.ippnuData)}catch(e){o(e.message)}finally{i(!1)}})()},[]),c)?(0,s.jsx)("p",{children:"Loading..."}):r?(0,s.jsxs)("p",{children:["Error: ",r]}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-8",children:"Statistik PAC Se-Ponorogo"}),(0,s.jsx)(S,{title:"Rekapitulasi Data PAC IPNU",data:e,list:g,hasMore:u,isListLoading:m,scrollerRef:N,loaderRef:f}),(0,s.jsx)(S,{title:"Rekapitulasi Data PAC IPPNU",data:t,list:g,hasMore:u,isListLoading:m,scrollerRef:N,loaderRef:f})]})}let S=e=>{let{title:a,data:t,list:l,hasMore:n,isListLoading:c,scrollerRef:i,loaderRef:r}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-center",children:a}),(0,s.jsxs)(m.b,{isHeaderSticky:!0,"aria-label":a,baseRef:i,bottomContent:n?(0,s.jsx)("div",{className:"flex w-full justify-center",children:(0,s.jsx)(h.c,{ref:r,color:"white"})}):null,classNames:{base:"max-h-[520px] overflow-scroll",table:"min-h-[400px]"},children:[(0,s.jsxs)(u.J,{className:"text-center",children:[(0,s.jsx)(j.j,{className:"text-center",children:"KECAMATAN"}),(0,s.jsx)(j.j,{className:"text-center",children:"STATUS SP"}),(0,s.jsx)(j.j,{className:"text-center",children:"TANGGAL BERAKHIR"}),(0,s.jsx)(j.j,{className:"text-center",children:"JUMLAH ANGGOTA"}),(0,s.jsx)(j.j,{className:"text-center",children:"JUMLAH DESA"}),(0,s.jsx)(j.j,{className:"text-center",children:"JUMLAH KOMISARIAT"}),(0,s.jsx)(j.j,{className:"text-center",children:"JUMLAH SEKOLAH"})]}),(0,s.jsx)(g.y,{isLoading:c,items:l.items,loadingContent:(0,s.jsx)(h.c,{color:"white"}),children:t.map(e=>(0,s.jsxs)(f.g,{children:[(0,s.jsx)(N.X,{className:"text-center",children:e.kecamatan}),(0,s.jsx)(N.X,{className:"text-center",children:(0,s.jsx)(p.z,{color:"Aktif"===k(e.tanggal_berakhir)?"success":"danger",variant:"flat",children:k(e.tanggal_berakhir)})}),(0,s.jsx)(N.X,{className:"text-center",children:e.tanggal_berakhir?new Date(e.tanggal_berakhir).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"Tanggal tidak tersedia"}),(0,s.jsx)(N.X,{className:"text-center",children:e.jumlah_anggota}),(0,s.jsx)(N.X,{className:"text-center",children:e.jumlah_desa}),(0,s.jsx)(N.X,{className:"text-center",children:e.jumlah_komisariat}),(0,s.jsx)(N.X,{className:"text-center",children:e.jumlah_sekolah})]},e._id))})]})]})};var w=t(9099),A=t(3354);function y(){let[e,a]=(0,l.useState)(null),[t,n]=(0,l.useState)([]),[c,i]=(0,l.useState)([]),[r,d]=(0,l.useState)(null),[x,m]=(0,l.useState)(!0),[h,u]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async function(){try{let e=await fetch("/api/statistik");if(!e.ok)throw Error("Gagal mengambil data");let a=await e.json();console.log("Data dari API:",a),d(a)}catch(e){u(e.message)}finally{m(!1)}})()},[]),(0,l.useEffect)(()=>{e&&a();async function a(){try{let a=await fetch("/api/kecamatan/".concat(e));if(!a.ok)throw Error("Gagal mengambil data kecamatan");let t=await a.json();i([t])}catch(e){console.error("Error:",e)}}},[e]),(0,l.useEffect)(()=>{(async function(){try{let e=await fetch("/api/kecamatan");if(!e.ok)throw Error("Gagal mengambil data kecamatan");let a=await e.json();n(a)}catch(e){console.error("Error fetching kecamatan:",e)}})()},[]),x)?(0,s.jsx)("p",{children:"Loading..."}):h?(0,s.jsxs)("p",{children:["Error: ",h]}):(0,s.jsx)("div",{children:(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-8",children:"Statistik PC IPNU-IPPNU Ponorogo"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4",children:[(0,s.jsx)(o,{title:"Total Anggota",value:r.totalStats.totalAnggota,icon:"lucide:users",color:"primary"}),(0,s.jsx)(o,{title:"Total Desa",value:r.totalStats.totalDesa,icon:"lucide:home",color:"success"}),(0,s.jsx)(o,{title:"Total Ranting",value:r.totalStats.totalRanting,icon:"lucide:git-branch",color:"warning"}),(0,s.jsx)(o,{title:"Total Sekolah",value:r.totalStats.totalSekolah,icon:"lucide:school",color:"secondary"}),(0,s.jsx)(o,{title:"Total Komisariat",value:r.totalStats.totalKomisariat,icon:"lucide:building",color:"primary"})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(b,{})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Detail Statistik Kecamatan"}),["primary"].map(l=>(0,s.jsx)(w.g,{className:"max-w-xs",color:"danger",value:e||"",label:"Kecamatan",placeholder:"Pilih PAC",onChange:e=>a(e.target.value),children:t.map(e=>(0,s.jsx)(A.R,{children:e.kecamatan},e._id))},l))]}),e&&c.length>0&&(0,s.jsxs)("div",{className:"mt-4 p-4 border rounded-lg bg-gray-100",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Detail Kecamatan"}),(0,s.jsxs)("p",{children:["ID: ",c[0]._id]}),(0,s.jsxs)("p",{children:["Nama: ",c[0].kecamatan]})]})]})]})})}}},function(e){e.O(0,[285,137,971,117,744],function(){return e(e.s=8536)}),_N_E=e.O()}]);