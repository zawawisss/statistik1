"use strict";(()=>{var t={};t.id=300,t.ids=[300],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7554:(t,e,a)=>{a.r(e),a.d(e,{originalPathname:()=>f,patchFetch:()=>w,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>p});var r={};a.r(r),a.d(r,{GET:()=>u});var o=a(9303),n=a(8716),i=a(670),c=a(7070),s=a(6039);async function u(){try{let[t,e,a,r]=await Promise.all([(0,s.c3)(),(0,s.QY)(),(0,s.yr)(),(0,s.yB)()]);return c.NextResponse.json({...t,kecamatanList:e,ipnuData:a,ippnuData:r})}catch(t){return console.error("Error fetching data:",t),c.NextResponse.json({error:"Failed to fetch data"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/statistik/route",pathname:"/api/statistik",filename:"route",bundlePath:"app/api/statistik/route"},resolvedPagePath:"/Users/awi/statistik/app/api/statistik/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:g}=l,f="/api/statistik/route";function w(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:p})}},6039:(t,e,a)=>{let r;a.d(e,{uH:()=>s,QY:()=>c,c3:()=>i,yr:()=>u,yB:()=>l});let o=require("mongodb"),n=process.env.MONGODB_URI;if(!n)throw Error("Please add your MongoDB URI to .env.local");async function i(){try{let t=await r,e=new Date().toISOString().split("T")[0],a=t.db("ipnu_ponorogo"),o=a.collection("database"),n=a.collection("database_komisariat"),i=a.collection("database_ranting"),c=a.collection("data_anggota"),s=await o.countDocuments(),u=await n.countDocuments(),l=await i.countDocuments(),d=await c.countDocuments(),p=await i.countDocuments({status_sp:"Aktif",tanggal_sp:{$gte:e}}),g=await n.countDocuments({status_sp:"Aktif",tanggal_sp:{$gte:e}});return{totalStats:{totalPAC:s,totalKomisariat:g,totalRanting:p,totalAnggota:d,totalDesa:l,totalSekolah:u}}}catch(t){return console.error("Error fetching data:",t),{totalStats:{}}}}async function c(){try{let t=(await r).db("ipnu_ponorogo").collection("database");return await t.find({},{projection:{_id:1,kecamatan:1}}).toArray()}catch(t){return console.error("Error fetching kecamatan:",t),[]}}async function s(t){try{let e=(await r).db("ipnu_ponorogo").collection("database");return await e.findOne({_id:new o.ObjectId(t)})}catch(t){return console.error("Error fetching kecamatan by ID:",t),null}}async function u(){try{let t=(await r).db("ipnu_ponorogo").collection("database");return await t.find().toArray()}catch(t){return console.error("Error fetching PAC IPNU data:",t),[]}}async function l(){try{let t=(await r).db("ippnu_ponorogo").collection("database");return await t.find().toArray()}catch(t){return console.error("Error fetching PAC IPPNU data:",t),[]}}r=new o.MongoClient(n,{}).connect()}};var e=require("../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),r=e.X(0,[276,972],()=>a(7554));module.exports=r})();